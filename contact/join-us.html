<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-H2YV0FNQ9X"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-H2YV0FNQ9X");
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Join UCA - United Club Association</title>

    <!-- Meta tags for SEO -->
    <meta
      name="description"
      content="Join the United Club Association (UCA) - Register as a new member or sign in to your existing account."
    />
    <meta
      name="keywords"
      content="UCA, United Club Association, join club, register, sign in, membership"
    />

    <!-- Include centralized fonts -->
    <script src="/js/include-fonts.js" defer></script>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/navbar.css" />
    <link rel="stylesheet" href="/css/footer.css" />
    <link rel="stylesheet" href="/css/join-us.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/DU_Logo.ico" />

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons" defer></script>

    <!-- Remove the duplicate script tag and use only the module version -->
    <script type="module" src="/js/join-us.js"></script>
  </head>
  <body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navbar will be inserted here by include-navbar.js -->
    <script src="/js/include-navbar.js" defer></script>

    <main id="main-content">
      <section class="join-hero">
        <div class="join-hero-content">
          <h1>Join UCA</h1>
          <p>Become part of our vibrant community of clubs</p>
        </div>
      </section>

      <section class="join-options">
        <div class="container">
          <div class="tabs">
            <button class="tab-btn active" data-tab="register">
              New Member
            </button>
            <button class="tab-btn" data-tab="login">Already Registered</button>
          </div>

          <div class="tab-content active" id="register-tab">
            <form id="registration-form" class="join-form" novalidate> <!-- Added novalidate to rely on JS validation -->
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName"
                    >First Name <span class="required">*</span></label
                  >
                  <input type="text" id="firstName" name="firstName" required />
                  <span class="error-message" id="firstName-error"></span>
                </div>
                <div class="form-group">
                  <label for="lastName"
                    >Last Name <span class="required">*</span></label
                  >
                  <input type="text" id="lastName" name="lastName" required />
                  <span class="error-message" id="lastName-error"></span>
                </div>
              </div>

              <div class="form-group">
                <label for="username"
                  >Username <span class="required">*</span></label
                >
                <input type="text" id="username" name="username" required />
                <span class="error-message" id="username-error"></span>
              </div>

              <div class="form-group">
                <label for="email"
                  >E-Mail <span class="required">*</span></label
                >
                <input type="email" id="email" name="email" required />
                <span class="error-message" id="email-error"></span>
              </div>

              <div class="form-group">
                <label for="reg-password"
                  >Password <span class="required">*</span></label
                >
                <div class="password-field">
                  <input
                    type="password"
                    id="reg-password"
                    name="password"
                    required
                  />
                  <button
                    type="button"
                    class="toggle-password"
                    aria-label="Toggle password visibility"
                  >
                    <i data-feather="eye"></i>
                  </button>
                </div>
                <span class="error-message" id="password-error"></span>
                <div class="password-strength">
                  <div class="strength-meter">
                    <div
                      class="strength-meter-fill"
                      id="strength-meter-fill"
                    ></div>
                  </div>
                  <span class="strength-text" id="strength-text"
                    >Password strength</span
                  >
                </div>
              </div>

              <div class="form-group">
                <label for="confirm-password"
                  >Confirm Password <span class="required">*</span></label
                >
                <div class="password-field">
                  <input
                    type="password"
                    id="confirm-password"
                    name="confirm-password"
                    required
                  />
                  <button
                    type="button"
                    class="toggle-password"
                    aria-label="Toggle password visibility"
                  >
                    <i data-feather="eye"></i>
                  </button>
                </div>
                <span class="error-message" id="confirm-password-error"></span>
              </div>

              <div class="form-group">
                <label for="mobile"
                  >Mobile Number <span class="required">*</span></label
                >
                <div class="phone-field">
                  <span class="country-code">+880</span>
                  <input
                    type="tel"
                    id="mobile"
                    name="mobile"
                    pattern="[0-9]{10}"
                    placeholder="1XXXXXXXXX"
                    required
                  />
                </div>
                <span class="error-message" id="mobile-error"></span>
              </div>

              <div class="form-group">
                <label>I am a <span class="required">*</span></label>
                <div class="radio-group">
                  <label class="radio-label">
                    <input
                      type="radio"
                      name="role"
                      value="student"
                      checked
                      id="role-student"
                    />
                    <span>Student</span>
                  </label>
                  <label class="radio-label">
                    <input
                      type="radio"
                      name="role"
                      value="teacher"
                      id="role-teacher"
                    />
                    <span>Teacher</span>
                  </label>
                </div>
              </div>

              <!-- Add School/College selection -->
              <div class="form-group">
                <label>School/College <span class="required">*</span></label>
                <div class="radio-group">
                  <label class="radio-label">
                    <input
                      type="radio"
                      name="institution-type"
                      value="ulsc"
                      checked
                      id="institution-ulsc"
                    />
                    <span>University Laboratory School and College</span>
                  </label>
                  <label class="radio-label">
                    <input
                      type="radio"
                      name="institution-type"
                      value="other"
                      id="institution-other"
                    />
                    <span>Other</span>
                  </label>
                </div>
              </div>

              <!-- Add institution name field - Ensure style="display: none;" is present -->
              <div class="form-group" id="other-institution-field" style="display: none;">
                <label for="institution-name">School/College Name <span class="required">*</span></label>
                <input type="text" id="institution-name" name="institution-name" placeholder="Enter your school/college name" />
                <span class="error-message" id="institution-name-error"></span>
              </div>

              <!-- Class field - Ensure id="class-field" is present -->
              <div class="form-group" id="class-field">
                <label for="class">Class <span class="required">*</span></label>
                <select id="class" name="class" required>
                  <option value="" disabled selected>Select your class</option>
                  <option value="VI">Class VI</option>
                  <option value="VII">Class VII</option>
                  <option value="VIII">Class VIII</option>
                  <option value="IX">Class IX</option>
                  <option value="X">Class X</option>
                  <option value="XI">Class XI</option>
                  <option value="XII">Class XII</option>
                </select>
                <span class="error-message" id="class-error"></span>
              </div>

              <div class="form-group checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="terms" name="terms" required />
                  <span
                    >I understand and agree to the
                    <a href="/terms.html">terms and conditions</a>
                    <span class="required">*</span></span
                  >
                </label>
                <span class="error-message" id="terms-error"></span>
              </div>

              <button type="submit" class="submit-btn">Register</button>
              <div class="form-message" id="register-message"></div>
            </form>
          </div>

          <!-- Login form update -->
          <div class="tab-content" id="login-tab">
            <form id="login-form" class="join-form" novalidate> <!-- Added novalidate -->
              <div class="form-group">
                <label for="login-identifier"
                  >Username or E-Mail <span class="required">*</span></label
                >
                <input
                  type="text"
                  id="login-identifier"
                  name="identifier"
                  required
                />
                <span class="error-message" id="login-identifier-error"></span>
              </div>

              <div class="form-group">
                <label for="password"
                  >Password <span class="required">*</span></label
                >
                <div class="password-field">
                  <input
                    type="password"
                    id="password"
                    name="password"
                    required
                  />
                  <button
                    type="button"
                    class="toggle-password"
                    aria-label="Toggle password visibility"
                  >
                    <i data-feather="eye"></i>
                  </button>
                </div>
                <span class="error-message" id="login-password-error"></span>
              </div>

              <div class="form-group checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="remember" name="remember" />
                  <span>Remember me</span>
                </label>
                <a href="#" class="forgot-password">Forgot password?</a>
              </div>

              <button type="submit" class="submit-btn">Sign In</button>
              <div class="form-message" id="login-message"></div>
            </form>
          </div>

          <!-- Add OTP verification modal - Ensure id="otp-modal" is present -->
          <div class="otp-modal" id="otp-modal">
            <div class="otp-modal-content">
              <h3>Verification Required</h3>
              <p>
                We've sent a verification code to your email. Please enter it
                below to continue.
              </p>

              <div class="otp-container">
                <!-- OTP Inputs -->
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1" class="otp-input" aria-label="OTP digit 1" placeholder="0" title="Enter first digit of OTP" />
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1" class="otp-input" aria-label="OTP digit 2" placeholder="0" title="Enter second digit of OTP" />
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1" class="otp-input" aria-label="OTP digit 3" placeholder="0" title="Enter third digit of OTP" />
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1" class="otp-input" aria-label="OTP digit 4" placeholder="0" title="Enter fourth digit of OTP" />
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1" class="otp-input" aria-label="OTP digit 5" placeholder="0" title="Enter fifth digit of OTP" />
                <input type="text" inputmode="numeric" pattern="[0-9]*" maxlength="1" class="otp-input" aria-label="OTP digit 6" placeholder="0" title="Enter sixth digit of OTP" />
              </div>

              <div class="otp-actions">
                <button type="button" id="verify-otp-btn" class="submit-btn">
                  Verify
                </button>
                <button type="button" id="resend-otp-btn" class="text-btn">
                  Resend Code
                </button>
              </div>

              <div class="form-message" id="otp-message"></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer will be inserted here by include-footer.js -->
    <script src="/js/include-footer.js" defer></script>

    <!-- Initialize Feather Icons after the DOM is ready -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof feather !== 'undefined') {
          feather.replace({ 'aria-hidden': 'true' });
        }
      });
    </script>
  </body>
</html>
